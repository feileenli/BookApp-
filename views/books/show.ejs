<%- include('../partials/header') %>

<div class="book-detail">
  <div class="book-detail-content">
    <div>
      <% if (book.coverUrl) { %>
        <img src="<%= book.coverUrl %>" alt="<%= book.title %>" onerror="this.src='https://via.placeholder.com/300x400?text=No+Cover'">
      <% } else { %>
        <img src="https://via.placeholder.com/300x400?text=No+Cover" alt="<%= book.title %>">
      <% } %>
    </div>
    
    <div class="book-info">
      <h2><%= book.title %></h2>
      <p class="meta"><strong>Author:</strong> <%= book.author %></p>
      
      <% if (book.isbn) { %>
        <p class="meta"><strong>ISBN:</strong> <%= book.isbn %></p>
      <% } %>
      
      <% if (book.publishYear) { %>
        <p class="meta"><strong>Published:</strong> <%= book.publishYear %></p>
      <% } %>
      
      <p class="meta">
        <strong>Status:</strong> 
        <span class="status <%= book.status %>">
          <%= book.status.replace('-', ' ').toUpperCase() %>
        </span>
      </p>
      
      <p class="meta"><strong>Added:</strong> <%= new Date(book.dateAdded).toLocaleDateString() %></p>
      
      <% if (book.description) { %>
        <div class="description">
          <h4>Description</h4>
          <p><%= book.description %></p>
        </div>
      <% } %>
      
      <% if (book.userNotes) { %>
        <div class="user-notes">
          <h4>My Notes</h4>
          <p><%= book.userNotes %></p>
        </div>
      <% } %>
    </div>
  </div>
  
  <div class="book-actions">
    <a href="/books/<%= book._id %>/edit" class="btn">Edit Book</a>
    <a href="/books" class="btn btn-secondary">Back to Collection</a>
    <form action="/books/<%= book._id %>/delete" method="POST" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this book?');">
      <button type="submit" class="btn btn-danger">Delete Book</button>
    </form>
  </div>
</div>

<%- include('../partials/footer') %>
